<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YOHOU 米国株AI - IPO分析 & スケジュール (2025年8月最終週)</title>
    <script src="https://cdn.tailwindcss.com/3.4.1"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#2563EB',
                        secondary: '#DC2626',
                        bullish: '#10b981',
                        bearish: '#ef4444',
                        neutral: '#6b7280',
                        'grade-s': '#D97706', // Amber 600
                        'grade-a': '#2563EB', // Blue 600
                        'grade-b': '#10B981', // Emerald 500
                        'grade-c': '#6B7280', // Gray 500
                    },
                    borderRadius: {
                        'none': '0px',
                        'sm': '4px',
                        DEFAULT: '8px',
                        'md': '12px',
                        'lg': '16px',
                        'xl': '20px',
                        '2xl': '24px',
                        '3xl': '32px',
                        'full': '9999px',
                        'button': '8px'
                    }
                }
            }
        }
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.6.0/remixicon.min.css">
    <script src="translations/load.js"></script>
    <script src="lang.js"></script>
    <style>
        body { font-family: 'Noto Sans JP', sans-serif; color: #1F2937; background-color: #f4f5f7; }
        .font-pacifico { font-family: 'Pacifico', cursive; }
        .grade-badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-weight: 700;
            color: white;
            font-size: 1.25rem;
        }
        .ipo-card, .ipo-table-row {
            cursor: pointer;
            transition: all 0.2s ease-in-out;
        }
        .ipo-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }
        .ipo-table-row:hover {
            background-color: #F9FAFB;
        }
        .modal-bg {
            background-color: rgba(0,0,0,0.6);
            backdrop-filter: blur(4px);
        }
        .modal-content {
            max-height: 90vh;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">

<header class="bg-white border-b border-gray-200">
    <div class="container mx-auto px-4 py-4">
        <div class="flex items-center justify-between">
            <div class="flex items-center space-x-8">
                <a href="index.html"><img src="image/logo.png" alt="YOHOU US Stocks AI" class="h-10"></a>
                <nav class="hidden md:flex space-x-6 text-gray-600">
                    <a href="index.html" class="hover:text-primary" data-lang="nav_today">本日の市況分析</a>
                    <a href="pickup.html" class="hover:text-primary" data-lang="nav_pickup">クレイマー保有銘柄</a>
                    <a href="ipo.html" class="text-primary font-medium border-b-2 border-primary pb-1" data-lang="nav_ipo">IPOスケジュール</a>
                    <a href="indicators.html" class="hover:text-primary" data-lang="nav_indicators">テクニカル指標解説</a>
                    <a href="terms.html" class="hover:text-primary" data-lang="nav_terms">市場用語集</a>
                    <a href="about.html" class="hover:text-primary" data-lang="nav_about">サイトについて</a>
                </nav>
            </div>
            <div class="flex items-center space-x-1 md:space-x-4">
                <button id="login-btn" class="hidden md:flex items-center space-x-2 text-gray-600 hover:text-primary cursor-not-allowed opacity-50"><i class="ri-user-line"></i><span data-lang="login">ログイン</span></button>
                <button id="register-btn" class="bg-primary text-white px-2 md:px-4 py-2 rounded-button font-medium hover:bg-primary/90 transition whitespace-nowrap cursor-not-allowed opacity-50 text-xs md:text-sm" data-lang="register">無料登録</button>
                <!-- 言語切り替えボタンをヘッダー内に配置 -->
                <div id="header-lang-switcher" class="flex items-center space-x-2 mr-2 md:mr-4">
                    <button class="lang-btn bg-primary text-white px-2 py-1 rounded text-xs font-medium transition-colors" data-lang="ja">日本語</button>
                    <span class="text-gray-400 text-xs">|</span>
                    <button class="lang-btn bg-gray-100 text-gray-700 px-2 py-1 rounded text-xs font-medium transition-colors" data-lang="en">EN</button>
                </div>
                <button id="mobile-menu-button" class="md:hidden text-gray-600 ml-2 hover:text-primary transition-colors">
                    <i class="ri-menu-line ri-lg"></i>
                </button>
            </div>
        </div>
    </div>
</header>

<!-- モバイルメニュー -->
<div id="mobile-menu" class="md:hidden hidden bg-white border-b border-gray-200 shadow-lg">
    <div class="px-4 py-2 space-y-1">
        <a href="index.html" class="block px-3 py-2 text-gray-600 hover:text-primary hover:bg-gray-50 transition-colors" data-lang="nav_today">本日の市況分析</a>
        <a href="pickup.html" class="block px-3 py-2 text-gray-600 hover:text-primary hover:bg-gray-50 transition-colors" data-lang="nav_pickup">クレイマー保有銘柄</a>
        <a href="ipo.html" class="block px-3 py-2 text-primary font-medium border-l-4 border-primary bg-blue-50" data-lang="nav_ipo">IPOスケジュール</a>
        <a href="indicators.html" class="block px-3 py-2 text-gray-600 hover:text-primary hover:bg-gray-50 transition-colors" data-lang="nav_indicators">テクニカル指標解説</a>
        <a href="terms.html" class="block px-3 py-2 text-gray-600 hover:text-primary hover:bg-gray-50 transition-colors" data-lang="nav_terms">市場用語集</a>
        <a href="about.html" class="block px-3 py-2 text-gray-600 hover:text-primary hover:bg-gray-50 transition-colors" data-lang="nav_about">サイトについて</a>
        <div class="border-t border-gray-200 pt-2 mt-2">
            <button class="block w-full text-left px-3 py-2 text-gray-600 hover:text-primary hover:bg-gray-50 transition-colors" data-lang="login">ログイン</button>
            <button class="block w-full text-left px-3 py-2 bg-primary text-white hover:bg-primary/90 rounded-md mx-3 mt-2 transition-colors" data-lang="register">無料登録</button>
        </div>
    </div>
</div>

<div class="w-full px-4 sm:px-6 py-10 md:px-12 lg:px-20">
    <header class="mb-14 text-center">
        <h1 class="text-4xl md:text-5xl font-bold text-gray-800 tracking-tight">米国株IPOスケジュール＆AI分析</h1>
        <p class="mt-4 text-lg max-w-3xl mx-auto text-gray-600">データに基づき、2025年8月25日以降に上場予定の注目企業を分析します。</p>
         <div class="mt-8 inline-flex items-center gap-6 rounded-xl bg-white border border-gray-200 px-8 py-4 shadow-sm">
            <p class="text-2xl font-medium flex items-center gap-3 text-gray-700">
                <i class="ri-calendar-check-line text-gray-500"></i>
                <span>8月25日の週</span>
            </p>
        </div>
    </header>

    <main>
        <section id="featured-ipos" class="mb-16">
            <h2 class="text-3xl font-bold text-gray-800 mb-8 text-center">
                <i class="ri-fire-fill text-red-500"></i>
                今週の注目IPO銘柄
            </h2>
            <div id="featured-ipo-container" class="grid grid-cols-1 md:grid-cols-2 gap-8">
            </div>
        </section>

        <section id="ipo-schedule">
            <h2 class="text-3xl font-bold text-gray-800 mb-8 text-center">
                 <i class="ri-calendar-2-line text-indigo-500"></i>
                IPOスケジュール一覧
            </h2>
            
            <div class="bg-white rounded-2xl shadow-lg ring-1 ring-gray-200 overflow-hidden">
                <div class="hidden md:block">
                    <table class="w-full text-left">
                        <thead class="bg-gray-50 border-b border-gray-200">
                            <tr>
                                <th class="px-6 py-4 text-sm font-bold text-gray-600">上場日</th>
                                <th class="px-6 py-4 text-sm font-bold text-gray-600">企業名 / ティッカー</th>
                                <th class="px-6 py-4 text-sm font-bold text-gray-600 text-center">AI評価</th>
                                <th class="px-6 py-4 text-sm font-bold text-gray-600">事業概要</th>
                                <th class="px-6 py-4 text-sm font-bold text-gray-600">公募価格</th>
                                <th class="px-6 py-4 text-sm font-bold text-gray-600">主幹事</th>
                            </tr>
                        </thead>
                        <tbody id="ipo-schedule-body"></tbody>
                    </table>
                </div>
                <div id="ipo-schedule-cards" class="md:hidden grid grid-cols-1 divide-y divide-gray-200"></div>
            </div>
        </section>
    </main>
    
    <footer class="text-center text-sm text-gray-500 mt-20 py-8">
        <p>この分析は提供された情報に基づく予測であり、投資成果を保証するものではありません。</p>
        <p>© 2025 株式会社BizRom東京. All rights reserved.</p>
    </footer>
</div>

<!-- Modal Structure -->
<div id="ipo-modal" class="fixed inset-0 z-50 flex items-center justify-center p-4 modal-bg hidden">
    <div id="modal-content" class="bg-white rounded-2xl shadow-2xl w-full max-w-4xl overflow-y-auto modal-content relative">
        <!-- Content will be injected by JS -->
    </div>
</div>

<script>
const ipoData = [
    {
        companyName: "ELC Group Holdings",
        ticker: "ELCG",
        listingDate: "8/25の週",
        aiRating: "B",
        evaluationText: "中立",
        shortDescription: "シンガポール拠点の人材サービス企業。SaaSモデルへ事業転換中。",
        priceRange: "$4.00 - $6.00",
        underwriter: "D. Boral Capital",
        fullDescription: "ELC Groupはシンガポールを拠点とする人材サービスプロバイダーです。コロナ禍後の需要減退を受け、従来の人材請負事業から、SaaS製品『Taskforce』を含むテクノロジー主導のビジネスモデルへと大きな事業転換を図っています。会社の将来は、この新しいアプリベースの人材供給サービスとSaaS事業の成長にかかっています。",
        valuation: "約1.1億ドル",
        financials: {
            revenueTTM: 6.4,
            netIncomeTTM: -1.2,
        },
        strengths: [
            "高利益率のSaaS事業への転換による粗利益率の改善 (12.7%→22.0%)",
            "中核となるアプリベース事業の収益が97.5%増と急成長",
            "パートタイム労働者向けの「即日払い」機能による競争優位性"
        ],
        risks: [
            "会社全体の売上は前年比で減少しており、純損失も拡大中",
            "SaaSへの事業転換はまだ初期段階で、実行リスクが高い",
            "人材派遣・テクノロジー市場は競争が非常に激しい"
        ]
    },
    {
        companyName: "Megan Holdings Ltd.",
        ticker: "MGN",
        listingDate: "8/25の週",
        aiRating: "B",
        evaluationText: "中立",
        shortDescription: "マレーシアのエビ養殖場開発・建設企業。スマート養殖技術へ注力。",
        priceRange: "$4.00 - $6.00",
        underwriter: "D. Boral Capital",
        fullDescription: "Megan Holdingsは、マレーシアを拠点とし、主にエビ養殖場の開発、建設、保守サービスを提供しています。近年は、水質モニタリングなどを可能にする独自のスマートファーミングシステムの開発に事業の軸足を移しており、従来の建設サービスから付加価値の高いテクノロジー企業への進化を目指しています。",
        valuation: "約8,100万ドル",
        financials: {
            revenueTTM: 18.6,
            netIncomeTTM: 1.8,
        },
        strengths: [
            "黒字経営を維持しつつ、売上は力強く成長",
            "スマートファーミングシステムによる将来の成長ポテンシャル",
            "ニッチ市場におけるワンストップソリューションプロバイダー"
        ],
        risks: [
            "収益の77.8%を上位2社の顧客に依存しており、顧客集中リスクが極めて高い",
            "事業拡大に伴い営業キャッシュフローがマイナスに転じている",
            "2020年設立と事業実績が短く、長期的な持続可能性は未知数"
        ]
    },
    {
        companyName: "Curanex Pharmaceuticals",
        ticker: "CURX",
        listingDate: "8/26",
        aiRating: "C",
        evaluationText: "見送り推奨",
        shortDescription: "植物由来の医薬品開発を行う前臨床段階のバイオ企業。単一候補に依存。",
        priceRange: "$4.00 - $6.00",
        underwriter: "Dominari Securities",
        fullDescription: "Curanex Pharmaceuticalsは、免疫・炎症性疾患を対象とした植物由来医薬品の開発に特化した、前臨床段階の早期バイオ医薬品企業です。主要候補であるPhyto-Nは、潰瘍性大腸炎などの治療薬として開発が進められていますが、まだヒトでの試験は開始されていません。事業の成功は、この単一の医薬品候補の臨床開発と最終的な商業化に完全に依存しており、典型的なハイリスク・ハイリターンのバイオテクノロジー投資案件です。",
        valuation: "約1.3億ドル",
        financials: {
            revenueTTM: 0,
            netIncomeTTM: -5.8,
        },
        strengths: [
            "巨大な市場規模を持つ疾患領域をターゲット",
            "伝統的な漢方薬に基づくユニークなアプローチ"
        ],
        risks: [
            "商業化された製品がなく収益ゼロ",
            "単一の未証明な医薬品候補への完全な依存",
            "開発継続のために将来大規模な追加資金調達が必須（大幅な希薄化リスク）",
            "臨床試験の失敗リスクが極めて高い"
        ]
    },
    {
        companyName: "PomDoctor",
        ticker: "POM",
        listingDate: "8/25の週",
        aiRating: "C",
        evaluationText: "見送り推奨",
        shortDescription: "中国で慢性疾患管理に特化したオンライン医療プラットフォームを運営。",
        priceRange: "$4.00 - $6.00",
        underwriter: "Joseph Stone Capital",
        fullDescription: "PomDoctorは、中国の巨大な慢性疾患市場をターゲットにした大手オンライン医療サービスプラットフォームです。患者、医師、医薬品を繋ぐワンストップサービスを提供し、オンラインでの再診や処方箋更新を主軸としています。契約医師数は21万人を超え、中国のインターネット病院市場で上位に位置しています。",
        valuation: "約5.9億ドル",
        financials: {
            revenueTTM: 45.2,
            netIncomeTTM: -4.0,
        },
        strengths: [
            "中国の高齢化と慢性疾患患者の増加という強力な市場の追い風",
            "21万人以上の医師ネットワークと300万件以上の処方実績",
            "リピート利用が見込める慢性疾患管理というビジネスモデル"
        ],
        risks: [
            "継続的な赤字経営と、大幅なマイナスの株主資本という脆弱な財務基盤",
            "中国政府による医療・医薬品業界への厳しい規制リスク",
            "中国のオンライン医療市場における激しい競争"
        ]
    },
    {
        companyName: "Hang Feng Technology Innovation",
        ticker: "FOFO",
        listingDate: "8/25の週",
        aiRating: "C",
        evaluationText: "見送り推奨",
        shortDescription: "香港拠点の企業経営コンサルティング・資産運用会社。",
        priceRange: "$4.00",
        underwriter: "Kingswood",
        fullDescription: "Hang Fengはケイマン諸島で設立された持株会社で、香港の子会社を通じて事業を展開しています。事業は、企業経営コンサルティングと資産運用の2つのセグメントで構成され、コンサルティング事業で築いた顧客との強固な関係を活用し、資産運用サービスへのクロスセルを図るという相乗効果を狙っています。",
        valuation: "約2,700万ドル",
        financials: {
            revenueTTM: 2.0,
            netIncomeTTM: 0.9,
        },
        strengths: [
            "コンサルティングと資産運用の相乗効果モデル",
            "小規模ながら黒字経営"
        ],
        risks: [
            "マイクロキャップであり規模が非常に小さい",
            "金融市場の状況に業績が大きく左右される",
            "複数の管轄区域にまたがる規制リスク"
        ]
    },
    {
        companyName: "Papa Medical, Inc.",
        ticker: "PAPA",
        listingDate: "8/25の週",
        aiRating: "C",
        evaluationText: "見送り推奨",
        shortDescription: "ヘンプ由来カンナビノイドの電子ベイパー製品を開発・製造。",
        priceRange: "$4.00",
        underwriter: "US Tiger Securities",
        fullDescription: "Papa Medicalは、医療用霧化技術を背景に持つ、米国における革新的なヘンプ投与ソリューションのエンドツーエンドプロバイダーです。同社は、研究開発、製剤設計、E-リキッド製造、充填、共同包装サービスまで、ヘンプカンナビノイドE-ベイパー（電子タバコ）産業のバリューチェーン全体に関与しています。",
        valuation: "約8,500万ドル",
        financials: {
            revenueTTM: 37.7,
            netIncomeTTM: 0.9,
        },
        strengths: [
            "急成長する市場と独自の技術",
            "力強い売上成長"
        ],
        risks: [
            "極めて高い規制リスクと法的リスク",
            "利益率の低下とマイナスの営業キャッシュフロー",
            "CEOによる支配構造と利益相反の可能性"
        ]
    },
    {
        companyName: "Phaos Technology",
        ticker: "POAS",
        listingDate: "8/25の週",
        aiRating: "C",
        evaluationText: "見送り推奨",
        shortDescription: "シンガポール拠点の超解像顕微鏡ソリューション企業。",
        priceRange: "$4.00 - $5.00",
        underwriter: "Network 1 Financial",
        fullDescription: "Phaos Technologyは、シンガポールを拠点とする投資持株会社で、子会社を通じて高度な顕微鏡関連ソリューションの組み立てと商業化を行っています。同社の核心技術は、特許取得済みのマイクロ球体支援技術であり、これにより既存の光学顕微鏡の倍率を大幅に向上させ、光学限界を超える解像度を実現します。",
        valuation: "約6,000万ドル",
        financials: {
            revenueTTM: 1.4,
            netIncomeTTM: -1.7,
        },
        strengths: [
            "特許取得済みの独自の超解像技術",
            "ニッチ市場での高い価値提案"
        ],
        risks: [
            "収益の急減と継続的な赤字という脆弱な財務",
            "市場受容性と競合リスク",
            "販売代理店への高い依存度"
        ]
    }
];

document.addEventListener('DOMContentLoaded', () => {
    const featuredIpos = ipoData.filter(ipo => ['A', 'B'].includes(ipo.aiRating)).sort((a, b) => (a.aiRating > b.aiRating) ? 1 : -1);
    populateFeaturedIpos(featuredIpos);
    populateIpoSchedule(ipoData);
    setupEventListeners();
});

function setupEventListeners() {
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');
    if (mobileMenuButton && mobileMenu) {
        mobileMenuButton.addEventListener('click', () => mobileMenu.classList.toggle('hidden'));
    }

    document.body.addEventListener('click', (e) => {
        const targetElement = e.target.closest('.ipo-card, .ipo-table-row');
        if (targetElement) {
            const ticker = targetElement.dataset.ticker;
            openModal(ticker);
        }
    });
}

function populateFeaturedIpos(ipos) {
    const container = document.getElementById('featured-ipo-container');
    if (!container) return;
    
    container.innerHTML = ipos.map(ipo => `
        <div class="ipo-card bg-white rounded-2xl shadow-lg p-8 ring-1 ring-gray-200 flex flex-col" data-ticker="${ipo.ticker}">
            <div class="flex items-center justify-between mb-4">
                <p class="text-sm font-medium text-gray-500">${ipo.listingDate} 上場予定</p>
                <div class="grade-badge bg-grade-${ipo.aiRating.toLowerCase()}">${ipo.aiRating}</div>
            </div>
            <h3 class="text-2xl font-bold text-gray-900">${ipo.companyName}</h3>
            <p class="text-lg font-semibold text-primary mb-3">${ipo.ticker}</p>
            <p class="text-gray-600 leading-relaxed flex-grow">${ipo.shortDescription}</p>
            <div class="mt-6 pt-6 border-t border-gray-200">
                <div class="flex justify-between items-center mb-2">
                    <span class="font-semibold text-gray-500">仮条件価格</span>
                    <span class="font-bold text-xl text-gray-800">${ipo.priceRange}</span>
                </div>
                <div class="flex justify-between items-center">
                    <span class="font-semibold text-gray-500">主幹事</span>
                    <span class="font-semibold text-gray-700">${ipo.underwriter}</span>
                </div>
            </div>
        </div>
    `).join('');
}

function populateIpoSchedule(schedule) {
    const tbody = document.getElementById('ipo-schedule-body');
    if (tbody) {
        tbody.innerHTML = schedule.map(item => `
            <tr class="ipo-table-row border-b border-gray-200 last:border-b-0" data-ticker="${item.ticker}">
                <td class="px-6 py-5 text-base font-medium text-gray-800">${item.listingDate}</td>
                <td class="px-6 py-5">
                    <p class="text-base font-bold text-gray-900">${item.companyName}</p>
                    <p class="text-sm font-medium text-gray-500">${item.ticker}</p>
                </td>
                <td class="px-6 py-5 text-center">
                    <div class="grade-badge bg-grade-${item.aiRating.toLowerCase()}">${item.aiRating}</div>
                </td>
                <td class="px-6 py-5 text-sm text-gray-700 max-w-xs truncate">${item.shortDescription}</td>
                <td class="px-6 py-5 text-base font-bold text-gray-800">${item.priceRange}</td>
                <td class="px-6 py-5 text-sm font-medium text-gray-700">${item.underwriter}</td>
            </tr>
        `).join('');
    }

    const cardsContainer = document.getElementById('ipo-schedule-cards');
    if (cardsContainer) {
        cardsContainer.innerHTML = schedule.map(item => `
            <div class="ipo-card p-4" data-ticker="${item.ticker}">
                <div class="flex items-start justify-between mb-3">
                    <div>
                        <h3 class="text-lg font-bold text-gray-900">${item.companyName}</h3>
                        <p class="text-md font-semibold text-primary">${item.ticker}</p>
                    </div>
                    <div class="grade-badge bg-grade-${item.aiRating.toLowerCase()}">${item.aiRating}</div>
                </div>
                <p class="text-sm text-gray-500 mb-3">${item.listingDate} 上場予定</p>
                <p class="text-gray-600 text-sm leading-relaxed mb-4">${item.shortDescription}</p>
                <div class="pt-4 border-t border-gray-100 text-sm">
                    <div class="flex justify-between items-center mb-1">
                        <span class="font-semibold text-gray-500">公募価格</span>
                        <span class="font-bold text-gray-800">${item.priceRange}</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="font-semibold text-gray-500">主幹事</span>
                        <span class="font-semibold text-gray-700">${item.underwriter}</span>
                    </div>
                </div>
            </div>
        `).join('');
    }
}

function openModal(ticker) {
    const data = ipoData.find(d => d.ticker === ticker);
    if (!data) return;

    const modal = document.getElementById('ipo-modal');
    const modalContent = document.getElementById('modal-content');

    modalContent.innerHTML = `
        <button id="close-modal" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600 z-10">
            <i class="ri-close-line ri-2x"></i>
        </button>
        <div class="p-6 sm:p-8">
            <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4">
                <div>
                    <h2 class="text-2xl md:text-3xl font-bold text-gray-900">${data.companyName}</h2>
                    <p class="text-xl font-semibold text-primary">${data.ticker}</p>
                </div>
                <div class="mt-3 sm:mt-0 text-left sm:text-right">
                    <span class="text-lg font-bold px-4 py-2 rounded-lg bg-grade-${data.aiRating.toLowerCase()} text-white">AI評価: ${data.aiRating} (${data.evaluationText})</span>
                </div>
            </div>
            
            <div class="mb-6 text-sm text-gray-600">
                ${data.fullDescription}
            </div>

            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center border-y border-gray-200 py-4 mb-6">
                <div>
                    <p class="text-xs text-gray-500">上場日</p>
                    <p class="font-bold text-md text-gray-800">${data.listingDate}</p>
                </div>
                <div>
                    <p class="text-xs text-gray-500">価格レンジ</p>
                    <p class="font-bold text-md text-gray-800">${data.priceRange}</p>
                </div>
                <div>
                    <p class="text-xs text-gray-500">想定時価総額</p>
                    <p class="font-bold text-md text-gray-800">${data.valuation}</p>
                </div>
                <div>
                    <p class="text-xs text-gray-500">主幹事</p>
                    <p class="font-bold text-md text-gray-800">${data.underwriter}</p>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div>
                    <h4 class="font-bold text-lg mb-3 text-gray-800">業績ハイライト</h4>
                    <div class="h-64"><canvas id="financials-chart"></canvas></div>
                </div>
                <div>
                    <h4 class="font-bold text-lg mb-3 text-gray-800">強みとリスク</h4>
                    <div class="space-y-4">
                        <div>
                            <h5 class="font-semibold text-green-600 flex items-center gap-2"><i class="ri-arrow-up-circle-fill"></i>強み</h5>
                            <ul class="list-disc list-inside mt-1 space-y-1 text-gray-600 text-sm">
                                ${data.strengths.map(s => `<li>${s}</li>`).join('')}
                            </ul>
                        </div>
                        <div>
                            <h5 class="font-semibold text-red-600 flex items-center gap-2"><i class="ri-arrow-down-circle-fill"></i>リスク</h5>
                            <ul class="list-disc list-inside mt-1 space-y-1 text-gray-600 text-sm">
                                ${data.risks.map(r => `<li>${r}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    `;
    
    modal.classList.remove('hidden');
    document.body.style.overflow = 'hidden';

    document.getElementById('close-modal').onclick = closeModal;
    modal.onclick = (e) => {
        if (e.target.id === 'ipo-modal') closeModal();
    };

    renderFinancialsChart(data.financials);
}

function closeModal() {
    const modal = document.getElementById('ipo-modal');
    modal.classList.add('hidden');
    document.body.style.overflow = 'auto';
}

function renderFinancialsChart(financials) {
    const ctx = document.getElementById('financials-chart').getContext('2d');
    if (window.financialsChart instanceof Chart) {
        window.financialsChart.destroy();
    }

    const hasData = financials.revenueTTM !== undefined && financials.netIncomeTTM !== undefined;

    if (!hasData || (financials.revenueTTM === 0 && financials.netIncomeTTM === 0 && financials.netIncomeTTM >= 0)) {
        ctx.font = "16px 'Noto Sans JP'";
        ctx.fillStyle = "#9ca3af";
        ctx.textAlign = "center";
        ctx.fillText("表示できる業績データがありません", ctx.canvas.width / 2, ctx.canvas.height / 2);
        return;
    }
    
    window.financialsChart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: ['直近12ヶ月'],
            datasets: [
                {
                    label: '売上高',
                    data: [financials.revenueTTM],
                    backgroundColor: 'rgba(59, 130, 246, 0.6)',
                    borderColor: 'rgba(59, 130, 246, 1)',
                    borderWidth: 1,
                    borderRadius: 4,
                },
                {
                    label: '純利益',
                    data: [financials.netIncomeTTM],
                    backgroundColor: 'rgba(239, 68, 68, 0.6)',
                    borderColor: 'rgba(239, 68, 68, 1)',
                    borderWidth: 1,
                    borderRadius: 4,
                }
            ]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                y: {
                    beginAtZero: false,
                    ticks: {
                        callback: function(value) {
                            return value.toLocaleString() + 'M';
                        }
                    },
                    title: {
                        display: true,
                        text: '金額 (百万ドル)'
                    }
                }
            },
            plugins: {
                legend: {
                    position: 'top',
                },
                tooltip: {
                    callbacks: {
                        label: function(context) {
                            let label = context.dataset.label || '';
                            if (label) {
                                label += ': ';
                            }
                            if (context.parsed.y !== null) {
                                label += context.parsed.y.toLocaleString() + '百万ドル';
                            }
                            return label;
                        }
                    }
                }
            }
        }
    });
}

// Initialize language system first
window.currentLang = localStorage.getItem('language') || 'ja';

// Initialize lang.js language system
if (window.initLanguage) {
    initLanguage();
}

// Initialize mobile menu
initializeMobileMenu();

// 未実装機能のアラート
document.getElementById('login-btn').addEventListener('click', () => {
    alert('この機能は現在準備中です。ご期待ください！');
});
document.getElementById('register-btn').addEventListener('click', () => {
    alert('この機能は現在準備中です。ご期待ください！');
});

// Mobile menu functionality
function initializeMobileMenu() {
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');
    const menuIcon = mobileMenuButton.querySelector('i');
    
    if (mobileMenuButton && mobileMenu) {
        mobileMenuButton.addEventListener('click', function() {
            const isHidden = mobileMenu.classList.contains('hidden');
            
            if (isHidden) {
                // メニューを開く
                mobileMenu.classList.remove('hidden');
                menuIcon.className = 'ri-close-line ri-lg';
            } else {
                // メニューを閉じる
                mobileMenu.classList.add('hidden');
                menuIcon.className = 'ri-menu-line ri-lg';
            }
        });
        
        // メニューリンクをクリックしたときにメニューを閉じる
        const menuLinks = mobileMenu.querySelectorAll('a');
        menuLinks.forEach(link => {
            link.addEventListener('click', function() {
                mobileMenu.classList.add('hidden');
                menuIcon.className = 'ri-menu-line ri-lg';
            });
        });
        
        // メニュー外をクリックしたときにメニューを閉じる
        document.addEventListener('click', function(event) {
            if (!mobileMenuButton.contains(event.target) && !mobileMenu.contains(event.target)) {
                mobileMenu.classList.add('hidden');
                menuIcon.className = 'ri-menu-line ri-lg';
            }
        });
    }
}
</script>
</body>
</html>
