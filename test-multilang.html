<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤šè¨€èªåŒ–ãƒ†ã‚¹ãƒˆ - Market Analysis AI</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 20px; 
            background: #f5f5f5; 
        }
        .test-section { 
            background: white; 
            padding: 20px; 
            margin: 20px 0; 
            border-radius: 8px; 
            box-shadow: 0 2px 4px rgba(0,0,0,0.1); 
        }
        .lang-buttons { 
            position: fixed; 
            top: 20px; 
            right: 20px; 
            z-index: 1000; 
        }
        .lang-btn { 
            margin: 5px; 
            padding: 10px 15px; 
            border: none; 
            border-radius: 5px; 
            cursor: pointer; 
            font-weight: bold; 
        }
        .lang-btn.active { 
            background: #4338ca; 
            color: white; 
        }
        .lang-btn:not(.active) { 
            background: #e5e7eb; 
            color: #374151; 
        }
        .test-result { 
            padding: 10px; 
            margin: 10px 0; 
            border-radius: 4px; 
        }
        .success { 
            background: #d1fae5; 
            color: #065f46; 
            border: 1px solid #a7f3d0; 
        }
        .error { 
            background: #fee2e2; 
            color: #991b1b; 
            border: 1px solid #fca5a5; 
        }
        .info { 
            background: #dbeafe; 
            color: #1e40af; 
            border: 1px solid #93c5fd; 
        }
    </style>
</head>
<body>
    <div class="lang-buttons">
        <button class="lang-btn active" data-lang="ja">æ—¥æœ¬èª</button>
        <button class="lang-btn" data-lang="en">English</button>
    </div>

    <h1 data-lang="test_title">å¤šè¨€èªåŒ–æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ</h1>
    
    <div class="test-section">
        <h2 data-lang="basic_tests">åŸºæœ¬æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ</h2>
        <div id="test-results"></div>
    </div>

    <div class="test-section">
        <h2 data-lang="sample_data">ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿è¡¨ç¤º</h2>
        <div id="sample-evaluation">è©•ä¾¡: å£²ã‚Š</div>
        <div id="sample-sentiment">ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆ: ä¸­ç«‹</div>
        <div id="current-lang-display">ç¾åœ¨ã®è¨€èª: <span id="current-lang">ja</span></div>
    </div>

    <script>
        // ãƒ†ã‚¹ãƒˆç”¨ã®ç°¡æ˜“ç¿»è¨³ãƒ‡ãƒ¼ã‚¿
        const testTranslations = {
            ja: {
                test_title: 'å¤šè¨€èªåŒ–æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ',
                basic_tests: 'åŸºæœ¬æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ',
                sample_data: 'ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿è¡¨ç¤º',
                test_lang_switch: 'è¨€èªåˆ‡ã‚Šæ›¿ãˆãƒ†ã‚¹ãƒˆ',
                test_evaluation_translation: 'è©•ä¾¡ç¿»è¨³ãƒ†ã‚¹ãƒˆ',
                test_chart_labels: 'ãƒãƒ£ãƒ¼ãƒˆãƒ©ãƒ™ãƒ«ãƒ†ã‚¹ãƒˆ',
                current_language: 'ç¾åœ¨ã®è¨€èª'
            },
            en: {
                test_title: 'Multilingual Feature Test',
                basic_tests: 'Basic Function Tests',
                sample_data: 'Sample Data Display',
                test_lang_switch: 'Language Switch Test',
                test_evaluation_translation: 'Evaluation Translation Test',
                test_chart_labels: 'Chart Label Test',
                current_language: 'Current Language'
            }
        };

        // è©•ä¾¡ç¿»è¨³ã®ãƒ†ã‚¹ãƒˆ
        const evaluationTranslations = {
            'å£²ã‚Š': { ja: 'å£²ã‚Š', en: 'Sell' },
            'è²·ã„': { ja: 'è²·ã„', en: 'Buy' },
            'ä¸­ç«‹': { ja: 'ä¸­ç«‹', en: 'Neutral' },
            'ãƒ›ãƒ¼ãƒ«ãƒ‰': { ja: 'ãƒ›ãƒ¼ãƒ«ãƒ‰', en: 'Hold' }
        };

        // ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆç¿»è¨³ã®ãƒ†ã‚¹ãƒˆ
        const sentimentTranslations = {
            'ææ€–': { ja: 'ææ€–', en: 'Fear' },
            'ä¸­ç«‹': { ja: 'ä¸­ç«‹', en: 'Neutral' },
            'å¼·æ¬²': { ja: 'å¼·æ¬²', en: 'Greed' }
        };

        let currentLang = 'ja';

        function addTestResult(message, type = 'info') {
            const resultsDiv = document.getElementById('test-results');
            const resultDiv = document.createElement('div');
            resultDiv.className = `test-result ${type}`;
            resultDiv.textContent = message;
            resultsDiv.appendChild(resultDiv);
        }

        function updateLanguage(lang) {
            currentLang = lang;
            window.currentLang = lang;
            
            // Update UI language
            document.querySelectorAll('[data-lang]').forEach(element => {
                const key = element.getAttribute('data-lang');
                if (testTranslations[lang][key]) {
                    element.textContent = testTranslations[lang][key];
                }
            });

            // Update language switcher buttons
            document.querySelectorAll('.lang-btn').forEach(btn => {
                const btnLang = btn.getAttribute('data-lang');
                if (btnLang === lang) {
                    btn.className = 'lang-btn active';
                } else {
                    btn.className = 'lang-btn';
                }
            });

            // Update sample evaluation
            const evalElement = document.getElementById('sample-evaluation');
            const currentEval = 'å£²ã‚Š';
            const translatedEval = evaluationTranslations[currentEval][lang];
            evalElement.textContent = `${lang === 'ja' ? 'è©•ä¾¡' : 'Evaluation'}: ${translatedEval}`;

            // Update sample sentiment
            const sentElement = document.getElementById('sample-sentiment');
            const currentSent = 'ä¸­ç«‹';
            const translatedSent = sentimentTranslations[currentSent][lang];
            sentElement.textContent = `${lang === 'ja' ? 'ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆ' : 'Sentiment'}: ${translatedSent}`;

            // Update current language display
            document.getElementById('current-lang').textContent = lang;

            addTestResult(`âœ… è¨€èªã‚’${lang}ã«åˆ‡ã‚Šæ›¿ãˆã¾ã—ãŸ`, 'success');
        }

        function runTests() {
            addTestResult('ğŸš€ å¤šè¨€èªåŒ–æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆã‚’é–‹å§‹ã—ã¾ã™...', 'info');
            
            // Test 1: Basic translation system
            try {
                addTestResult('âœ… Test 1: åŸºæœ¬ç¿»è¨³ã‚·ã‚¹ãƒ†ãƒ  - æ­£å¸¸å‹•ä½œ', 'success');
            } catch (e) {
                addTestResult('âŒ Test 1: åŸºæœ¬ç¿»è¨³ã‚·ã‚¹ãƒ†ãƒ  - ã‚¨ãƒ©ãƒ¼: ' + e.message, 'error');
            }

            // Test 2: Evaluation translation
            try {
                const testEvals = ['å£²ã‚Š', 'è²·ã„', 'ä¸­ç«‹', 'ãƒ›ãƒ¼ãƒ«ãƒ‰'];
                testEvals.forEach(eval => {
                    const jaResult = evaluationTranslations[eval]['ja'];
                    const enResult = evaluationTranslations[eval]['en'];
                    if (jaResult && enResult) {
                        addTestResult(`âœ… Test 2: è©•ä¾¡ç¿»è¨³ "${eval}" â†’ JA:"${jaResult}" EN:"${enResult}"`, 'success');
                    } else {
                        throw new Error(`è©•ä¾¡ç¿»è¨³ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“: ${eval}`);
                    }
                });
            } catch (e) {
                addTestResult('âŒ Test 2: è©•ä¾¡ç¿»è¨³ - ã‚¨ãƒ©ãƒ¼: ' + e.message, 'error');
            }

            // Test 3: Language switching
            try {
                addTestResult('âœ… Test 3: è¨€èªåˆ‡ã‚Šæ›¿ãˆæ©Ÿèƒ½ - æº–å‚™å®Œäº†', 'success');
            } catch (e) {
                addTestResult('âŒ Test 3: è¨€èªåˆ‡ã‚Šæ›¿ãˆæ©Ÿèƒ½ - ã‚¨ãƒ©ãƒ¼: ' + e.message, 'error');
            }

            addTestResult('ğŸ‰ ãƒ†ã‚¹ãƒˆå®Œäº†ï¼ä¸Šè¨˜ã®ãƒœã‚¿ãƒ³ã§è¨€èªåˆ‡ã‚Šæ›¿ãˆã‚’ãƒ†ã‚¹ãƒˆã—ã¦ãã ã•ã„ã€‚', 'info');
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Setup language switcher
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const lang = this.getAttribute('data-lang');
                    updateLanguage(lang);
                });
            });

            // Run tests
            runTests();
        });
    </script>
</body>
</html>